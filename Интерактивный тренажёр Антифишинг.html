<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Антифишинг | Интерактивный образовательный тренажёр</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #7f8c8d;
            --light-gray: #bdc3c7;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--accent);
        }

        .logo h1 {
            font-size: 2.2rem;
            font-weight: 700;
        }

        .tagline {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* Navigation */
        .main-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--accent);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Module Selection */
        .module-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .module-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-top: 5px solid var(--secondary);
            cursor: pointer;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .module-card.teens {
            border-top-color: #9b59b6;
        }

        .module-card.adults {
            border-top-color: #e67e22;
        }

        .module-card h3 {
            font-size: 1.6rem;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .module-card p {
            color: var(--gray);
            margin-bottom: 20px;
        }

        .module-card ul {
            padding-left: 20px;
            margin-bottom: 25px;
        }

        .module-card li {
            margin-bottom: 8px;
        }

        .btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-weight: 600;
        }

        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .btn-danger {
            background-color: var(--accent);
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #219653;
        }

        /* Training Area */
        .training-area {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            display: none;
        }

        .training-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scenario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        .scenario-info h3 {
            font-size: 1.5rem;
            color: var(--dark);
        }

        .scenario-info p {
            color: var(--gray);
        }

        .progress-info {
            background-color: var(--light);
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .message-display {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            border: 1px solid #e0e0e0;
            margin-bottom: 30px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 300px;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .sender-info h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .sender-info p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .message-subject {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .message-body {
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .message-footer {
            padding-top: 15px;
            border-top: 1px solid #ddd;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .decision-area {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .decision-area.collapsed {
            max-height: 0;
            padding: 0;
            margin: 0;
            overflow: hidden;
            opacity: 0;
        }

        .decision-area h4 {
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: var(--dark);
        }

        .decision-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .decision-btn {
            flex: 1;
            min-width: 200px;
            padding: 16px;
            font-size: 1rem;
            border-radius: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: 600;
        }

        .decision-btn.phishing {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--accent);
            border-color: rgba(231, 76, 60, 0.3);
        }

        .decision-btn.phishing:hover, .decision-btn.phishing.selected {
            background-color: rgba(231, 76, 60, 0.2);
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .decision-btn.legitimate {
            background-color: rgba(39, 174, 96, 0.1);
            color: var(--success);
            border-color: rgba(39, 174, 96, 0.3);
        }

        .decision-btn.legitimate:hover, .decision-btn.legitimate.selected {
            background-color: rgba(39, 174, 96, 0.2);
            border-color: var(--success);
            transform: translateY(-2px);
        }

        .indicators-area {
            margin-top: 25px;
            display: none;
        }

        .indicators-area.visible {
            display: block;
        }

        .indicators-area h5 {
            margin-bottom: 15px;
            color: var(--dark);
        }

        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .indicator-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .indicator-checkbox:hover {
            background-color: #f0f0f0;
        }

        .indicator-checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* Feedback Area */
        .feedback-area {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            display: none;
        }

        .feedback-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .feedback-header i {
            font-size: 2rem;
        }

        .feedback-header.correct i {
            color: var(--success);
        }

        .feedback-header.incorrect i {
            color: var(--accent);
        }

        .feedback-details h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .feedback-points {
            margin-top: 20px;
        }

        .feedback-point {
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .feedback-point.phishing-clue {
            background-color: rgba(231, 76, 60, 0.1);
            border-left-color: var(--accent);
        }

        .feedback-point.security-tip {
            background-color: rgba(39, 174, 96, 0.1);
            border-left-color: var(--success);
        }

        /* Statistics */
        .stats-area {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            display: none;
        }

        .stats-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background-color: var(--light);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            text-align: center;
            padding: 25px 0;
            margin-top: 50px;
            border-radius: 15px 15px 0 0;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content p {
            margin-bottom: 10px;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .module-selection {
                flex-direction: column;
                align-items: center;
            }
            
            .module-card {
                width: 100%;
                padding: 20px;
            }
            
            .decision-buttons {
                flex-direction: column;
            }
            
            .decision-btn {
                min-width: 100%;
            }
            
            .main-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 90%;
                justify-content: center;
            }
            
            .scenario-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .progress-info {
                align-self: flex-start;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-30 {
            margin-top: 30px;
        }
        
        .back-btn {
            background-color: var(--gray);
            margin-right: 10px;
        }
        
        .back-btn:hover {
            background-color: #6c7a7d;
        }
        
        .show-answers-btn {
            background-color: var(--warning);
            margin-top: 15px;
        }
        
        .show-answers-btn:hover {
            background-color: #e67e22;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <h1>Антифишинг</h1>
            </div>
            <p class="tagline">Интерактивный образовательный тренажёр по противодействию фишинговым атакам</p>
            
            <nav class="main-nav">
                <button class="nav-btn active" id="homeBtn">
                    <i class="fas fa-home"></i> Главная
                </button>
                <button class="nav-btn" id="trainingBtn">
                    <i class="fas fa-graduation-cap"></i> Тренажёр
                </button>
                <button class="nav-btn" id="statsBtn">
                    <i class="fas fa-chart-bar"></i> Статистика
                </button>
                <button class="nav-btn" id="methodBtn">
                    <i class="fas fa-book"></i> Методика
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Home / Module Selection -->
        <section id="homeSection">
            <h2 class="text-center mb-20">Выберите учебный модуль для вашей возрастной группы</h2>
            
            <div class="module-selection">
                <!-- Module 1: Teens -->
                <div class="module-card teens" id="teensModule">
                    <h3><i class="fas fa-users"></i> Модуль 1: Для детей и подростков (7-17 лет)</h3>
                    <p><strong>Тема:</strong> "Цифровая повседневность: риски в социальных сетях и онлайн-сервисах"</p>
                    <p>Сфокусирован на сценариях, характерных для цифровой среды детей и подростков:</p>
                    <ul>
                        <li>Фишинг в социальных сетях</li>
                        <li>Мошенничество в игровой и развлекательной сферах</li>
                        <li>Угрозы через мессенджеры</li>
                    </ul>
                    <button class="btn" id="startTeensModule">
                        <i class="fas fa-play-circle"></i> Начать обучение
                    </button>
                </div>
                
                <!-- Module 2: Adults -->
                <div class="module-card adults" id="adultsModule">
                    <h3><i class="fas fa-user-tie"></i> Модуль 2: Для взрослых (45-65 лет)</h3>
                    <p><strong>Тема:</strong> "Финансы и официальная коммуникация: анализ целевых угроз"</p>
                    <p>Моделирует атаки на сферу финансов и взаимодействия с официальными институтами:</p>
                    <ul>
                        <li>Банковский фишинг</li>
                        <li>Фишинг под государственные и коммунальные службы</li>
                        <li>Мошенничество от имени служб доставки</li>
                    </ul>
                    <button class="btn" id="startAdultsModule">
                        <i class="fas fa-play-circle"></i> Начать обучение
                    </button>
                </div>
            </div>
            
            <div class="text-center mt-30">
                <h3>Алгоритм работы с тренажёром</h3>
                <div style="max-width: 800px; margin: 20px auto; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 10px; width: 180px; box-shadow: 0 3px 10px rgba(0,0,0,0.08);">
                        <div style="background: var(--secondary); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-weight: bold;">1</div>
                        <p><strong>Предъявление угрозы</strong></p>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px; width: 180px; box-shadow: 0 3px 10px rgba(0,0,0,0.08);">
                        <div style="background: var(--secondary); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-weight: bold;">2</div>
                        <p><strong>Анализ и решение</strong></p>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px; width: 180px; box-shadow: 0 3px 10px rgba(0,0,0,0.08);">
                        <div style="background: var(--secondary); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-weight: bold;">3</div>
                        <p><strong>Обратная связь</strong></p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Training Area -->
        <section class="training-area" id="trainingSection">
            <div class="scenario-header">
                <div class="scenario-info">
                    <h3 id="scenarioTitle">Фишинг в социальной сети</h3>
                    <p id="scenarioDescription">Сообщение от имени "администрации" социальной сети</p>
                </div>
                <div class="progress-info">
                    Задание <span id="currentTask">1</span> из <span id="totalTasks">8</span>
                </div>
            </div>
            
            <!-- Message Display -->
            <div class="message-display" id="messageDisplay">
                <div class="message-header">
                    <div class="sender-info">
                        <h4 id="senderName">Администрация ВКонтакте</h4>
                        <p id="senderEmail">support@vk-security.com</p>
                    </div>
                    <div id="messageTime">Сегодня, 14:30</div>
                </div>
                
                <div class="message-subject" id="messageSubject">Ваш аккаунт будет заблокирован!</div>
                
                <div class="message-body" id="messageBody">
                    <p>Уважаемый пользователь!</p>
                    <p>Наша система безопасности обнаружила подозрительную активность в вашем аккаунте. Для предотвращения несанкционированного доступа, ваш аккаунт будет заблокирован в течение 24 часов.</p>
                    <p>Чтобы избежать блокировки, немедленно перейдите по ссылке и подтвердите свои данные:</p>
                    <p style="margin: 15px 0;">
                        <a href="#" id="phishingLink" style="color: #3498db; text-decoration: underline;">https://vk-secure-confirm.ru/verify</a>
                    </p>
                    <p>Если вы не предпримете действий в течение 24 часов, ваш аккаунт будет permanently заблокирован.</p>
                    <p>С уважением,<br>Служба безопасности ВКонтакте</p>
                </div>
                
                <div class="message-footer">
                    <p>Это письмо было отправлено автоматически. Пожалуйста, не отвечайте на него.</p>
                </div>
            </div>
            
            <!-- Decision Area -->
            <div class="decision-area" id="decisionArea">
                <h4>Проанализируйте сообщение. Как вы оцените его?</h4>
                
                <div class="decision-buttons">
                    <button class="decision-btn phishing" id="phishingBtn">
                        <i class="fas fa-exclamation-triangle"></i> Это фишинговое сообщение
                    </button>
                    <button class="decision-btn legitimate" id="legitimateBtn">
                        <i class="fas fa-check-circle"></i> Это обычное сообщение
                    </button>
                </div>
                
                <div class="indicators-area" id="indicatorsArea">
                    <h5>Выберите признаки, которые помогли вам принять решение (если применимо):</h5>
                    <div class="indicators-grid" id="indicatorsGrid">
                        <!-- Indicators will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="text-center">
                    <button class="btn back-btn" id="backToModulesBtn">
                        <i class="fas fa-arrow-left"></i> Вернуться к модулям
                    </button>
                    <button class="btn btn-success" id="submitBtn" disabled>
                        <i class="fas fa-paper-plane"></i> Подтвердить ответ
                    </button>
                </div>
            </div>
            
            <!-- Feedback Area -->
            <div class="feedback-area" id="feedbackArea">
                <!-- Feedback will be populated by JavaScript -->
            </div>
            
            <!-- Next button area (after feedback) -->
            <div class="text-center mt-20" id="nextButtonArea" style="display: none;">
                <button class="btn show-answers-btn" id="showAnswersBtn">
                    <i class="fas fa-eye"></i> Показать варианты ответа
                </button>
                <button class="btn" id="nextBtn">
                    <i class="fas fa-arrow-right"></i> Следующее задание
                </button>
            </div>
        </section>
        
        <!-- Statistics Area -->
        <section class="stats-area" id="statsSection">
            <h2 class="text-center mb-20">Ваша статистика обучения</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Пройдено заданий</h4>
                    <div class="stat-value" id="completedTasks">0</div>
                    <p>из <span id="totalCompletedTasks">16</span></p>
                </div>
                <div class="stat-card">
                    <h4>Правильных ответов</h4>
                    <div class="stat-value" id="correctAnswers">0</div>
                    <p><span id="correctPercentage">0</span>% точность</p>
                </div>
                <div class="stat-card">
                    <h4>Текущая серия</h4>
                    <div class="stat-value" id="currentStreak">0</div>
                    <p>правильных ответов подряд</p>
                </div>
                <div class="stat-card">
                    <h4>Освоено модулей</h4>
                    <div class="stat-value" id="modulesCompleted">0</div>
                    <p>из 2 доступных</p>
                </div>
            </div>
            
            <div class="text-center mt-30">
                <button class="btn" id="resetStatsBtn">
                    <i class="fas fa-redo"></i> Сбросить статистику
                </button>
                <button class="btn back-btn" id="backToHomeFromStats">
                    <i class="fas fa-home"></i> На главную
                </button>
            </div>
        </section>
        
        <!-- Methodology Section -->
        <section class="training-area" id="methodSection">
            <h2 class="text-center mb-20">Методический сценарий использования тренажёра</h2>
            
            <div style="background: #f8f9fa; border-radius: 10px; padding: 25px; margin-bottom: 25px;">
                <h3 style="color: var(--dark); margin-bottom: 15px;">Этапы учебного занятия с тренажёром</h3>
                
                <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1; min-width: 250px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.05);">
                        <h4 style="color: var(--secondary); margin-bottom: 10px;">1. Мотивационно-ориентировочный этап (5-7 мин.)</h4>
                        <p>Педагог формулирует проблему фишинга, приводит статистику, вовлекает аудиторию в дискуссию о личном опыте столкновения с подобными угрозами.</p>
                    </div>
                    
                    <div style="flex: 1; min-width: 250px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.05);">
                        <h4 style="color: var(--secondary); margin-bottom: 10px;">2. Совместная аналитическая работа (15-20 мин.)</h4>
                        <p>На интерактивной доске демонстрируется работа с 2-3 заданиями из тренажёра. Организуется коллективное обсуждение каждого кейса.</p>
                    </div>
                    
                    <div style="flex: 1; min-width: 250px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.05);">
                        <h4 style="color: var(--secondary); margin-bottom: 10px;">3. Самостоятельная практика (10-15 мин.)</h4>
                        <p>Учащиеся индивидуально или в малых группах выполняют серию заданий на персональных устройствах.</p>
                    </div>
                    
                    <div style="flex: 1; min-width: 250px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.05);">
                        <h4 style="color: var(--secondary); margin-bottom: 10px;">4. Рефлексивно-оценочный этап (5-7 мин.)</h4>
                        <p>На основе индивидуальной статистики проводится обсуждение результатов, подводятся итоги, формулируются правила цифровой гигиены.</p>
                    </div>
                </div>
            </div>
            
            <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 3px 10px rgba(0,0,0,0.05); margin-bottom: 25px;">
                <h3 style="color: var(--dark); margin-bottom: 15px;">Цели и задачи проектного продукта</h3>
                <ul style="padding-left: 20px;">
                    <li style="margin-bottom: 10px;">Сформировать у пользователя устойчивый навык критического анализа входящих цифровых сообщений</li>
                    <li style="margin-bottom: 10px;">Обучить идентификации формальных и контекстуальных признаков фишинга</li>
                    <li style="margin-bottom: 10px;">Обеспечить усвоение знаний через практику в безопасной среде</li>
                </ul>
            </div>
            
            <div class="text-center">
                <button class="btn back-btn" id="backToHomeFromMethod">
                    <i class="fas fa-arrow-left"></i> Вернуться на главную
                </button>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <p>Интерактивный образовательный тренажёр «Антифишинг»</p>
            <p>Разработан для формирования алгоритмических навыков распознавания фишинговых атак</p>
            <p>© 2026 Практическая часть исследования по кибербезопасности</p>
        </div>
    </footer>

    <script>
        // Application State
        const state = {
            currentModule: null,
            currentScenario: 0,
            userScore: 0,
            totalScenarios: 8,
            scenariosCompleted: 0,
            currentStreak: 0,
            maxStreak: 0,
            userAnswers: [],
            modulesCompleted: 0,
            selectedAnswer: null,
            selectedIndicators: [],
            showAnswersAfterFeedback: false
        };

        // Data: Scenarios for both modules
        const scenarios = {
            teens: [
                {
                    title: "Фишинг в социальной сети",
                    description: "Сообщение от имени 'администрации' социальной сети",
                    senderName: "Администрация ВКонтакте",
                    senderEmail: "support@vk-security.com",
                    subject: "Ваш аккаунт будет заблокирован!",
                    body: `<p>Уважаемый пользователь!</p>
                           <p>Наша система безопасности обнаружила подозрительную активность в вашем аккаунте. Для предотвращения несанкционированного доступа, ваш аккаунт будет заблокирован в течение 24 часов.</p>
                           <p>Чтобы избежать блокировки, немедленно перейдите по ссылке и подтвердите свои данные:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://vk-secure-confirm.ru/verify</a>
                           </p>
                           <p>Если вы не предпримете действий в течение 24 часов, ваш аккаунт будет permanently заблокирован.</p>
                           <p>С уважением,<br>Служба безопасности ВКонтакте</p>`,
                    isPhishing: true,
                    indicators: [
                        "Поддельный домен отправителя (не vk.com)",
                        "Использование манипулятивного триггера (срочность)",
                        "Ссылка ведет на подозрительный домен",
                        "Орфографическая ошибка в тексте (permanently)"
                    ],
                    feedback: {
                        correct: "Верно! Это фишинговое сообщение. Официальный домен ВКонтакте - vk.com, а не vk-security.com. Сообщение создает искусственную срочность, чтобы вы не успели обдумать решение.",
                        incorrect: "Это было фишинговое сообщение. Настоящие уведомления от социальных сетей никогда не содержат ссылок для 'подтверждения данных' и не создают искусственной срочности."
                    },
                    tips: [
                        "Официальные уведомления от социальных сетей приходят с корпоративных доменов (например, @vk.com, @facebook.com).",
                        "Сообщения, создающие искусственную срочность ('вас заблокируют через 24 часа') - частый признак фишинга.",
                        "Всегда проверяйте домен сайта, на который ведет ссылка, перед переходом."
                    ]
                },
                {
                    title: "Подозрительное предложение в игре",
                    description: "Сообщение о 'бесплатных' игровых ресурсах",
                    senderName: "Раздача бонусов",
                    senderEmail: "noreply@free-fortnite-vbucks.com",
                    subject: "Получите 5000 V-Bucks бесплатно!",
                    body: `<p>Привет, игрок!</p>
                           <p>Мы разыгрываем 5000 V-Bucks среди активных игроков Fortnite! Вы стали одним из победителей.</p>
                           <p>Чтобы получить свой приз, перейдите по ссылке и введите данные вашего аккаунта Epic Games:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://fortnite-vbucks-free.ru/claim</a>
                           </p>
                           <p>Предложение действительно только 2 часа! Успейте получить свой приз.</p>
                           <p>Удачи в игре!</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен отправителя",
                        "Предложение 'бесплатных' ценных ресурсов",
                        "Ограниченное время действия предложения",
                        "Требует ввода данных аккаунта"
                    ],
                    feedback: {
                        correct: "Правильно! Это фишинговая атака, направленная на кражу игровых аккаунтов. Настоящие раздачи от Epic Games проводятся только через официальные каналы.",
                        incorrect: "Это было фишинговое сообщение. Игровые компании никогда не запрашивают данные аккаунтов через сторонние сайты и не рассылают 'бесплатные' предложения случайным игрокам."
                    },
                    tips: [
                        "Настоящие конкурсы и раздачи от игровых компаний проводятся через официальные сайты и социальные сети.",
                        "Никогда не вводите данные своего игрового аккаунта на сторонних сайтах.",
                        "Если предложение кажется слишком хорошим, чтобы быть правдой, скорее всего, это мошенничество."
                    ]
                },
                {
                    title: "Сообщение от друга",
                    description: "Странное сообщение в мессенджере от знакомого",
                    senderName: "Мария (друг)",
                    senderEmail: "Личное сообщение",
                    subject: "Смотри, что я нашла про тебя!",
                    body: `<p>Привет! Ты тут недавно упоминался в одном паблике, смотри скриншот:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://vk-best-photos.ru/view/12345</a>
                           </p>
                           <p>Там такое про тебя пишут, даже не представляешь!</p>
                           <p>Быстро переходи по ссылке, пока не удалили.</p>
                           <p>Это важно!</p>`,
                    isPhishing: true,
                    indicators: [
                        "Необычное поведение друга (нехарактерное сообщение)",
                        "Ссылка на подозрительный домен",
                        "Попытка вызвать любопытство и срочность",
                        "Расплывчатая формулировка ('такое про тебя пишут')"
                    ],
                    feedback: {
                        correct: "Верно! Это фишинговая атака через взломанный аккаунт друга. Злоумышленники часто используют взломанные аккаунты для рассылки вредоносных ссылок.",
                        incorrect: "Это было фишинговое сообщение. Если вы получаете странное сообщение от друга с непонятной ссылкой, лучше уточните у него лично, прежде чем переходить по ссылке."
                    },
                    tips: [
                        "Если друг присылает странное сообщение с непонятной ссылкой, свяжитесь с ним другим способом, чтобы убедиться, что это он.",
                        "Не переходите по ссылкам из сообщений, которые вызывают у вас любопытство или тревогу.",
                        "Взломанные аккаунты друзей - частый канал распространения фишинговых атак."
                    ]
                },
                {
                    title: "Легитимное уведомление от Discord",
                    description: "Настоящее письмо о безопасности аккаунта",
                    senderName: "Discord",
                    senderEmail: "security@discord.com",
                    subject: "Новый вход в ваш аккаунт Discord",
                    body: `<p>Привет!</p>
                           <p>Мы заметили новый вход в ваш аккаунт Discord.</p>
                           <p><strong>Дата и время:</strong> 15 марта 2023, 14:30 (MSK)</p>
                           <p><strong>Местоположение:</strong> Москва, Россия</p>
                           <p><strong>Устройство:</strong> Chrome, Windows 10</p>
                           <p>Если это были вы, можете проигнорировать это сообщение. Если нет, немедленно <a href="https://discord.com/login" style="color: #3498db;">измените свой пароль</a> и включите двухфакторную аутентификацию в настройках безопасности.</p>
                           <p>Для просмотра всех активных сессий перейдите в Настройки → Безопасность.</p>
                           <p>Спасибо,<br>Команда безопасности Discord</p>`,
                    isPhishing: false,
                    indicators: [
                        "Официальный домен отправителя (@discord.com)",
                        "Конкретные детали о событии (время, местоположение)",
                        "Не требует немедленных действий через ссылку",
                        "Предлагает перейти в настройки приложения для управления безопасностью"
                    ],
                    feedback: {
                        correct: "Верно! Это обычное уведомление о безопасности от Discord. Обратите внимание на официальный домен, конкретные детали и отсутствие требования немедленных действий.",
                        incorrect: "Это было обычное сообщение от Discord. Настоящие уведомления о безопасности содержат конкретные детали и не требуют немедленных действий через подозрительные ссылки."
                    },
                    tips: [
                        "Настоящие уведомления о безопасности содержат конкретные детали (время, местоположение, устройство).",
                        "Официальные домены компаний обычно простые и узнаваемые (@discord.com, @google.com).",
                        "Легитимные сервисы редко требуют немедленных действий и дают время на проверку."
                    ]
                },
                {
                    title: "Фишинговая рассылка о подписке",
                    description: "Сообщение о платной подписке в TikTok",
                    senderName: "TikTok Support",
                    senderEmail: "billing@tiktok-premium.com",
                    subject: "С вашей карты списаны 2990 руб. за подписку TikTok Premium",
                    body: `<p>Уважаемый пользователь TikTok!</p>
                           <p>С вашей банковской карты **** 4832 было списано 2990 рублей за автоматическое продление подписки TikTok Premium.</p>
                           <p>Если вы не оформляли подписку, перейдите по ссылке для отмены в течение 24 часов:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://tiktok-billing-support.ru/cancel</a>
                           </p>
                           <p>После 24 часов возврат средств будет невозможен.</p>
                           <p>С уважением,<br>Служба поддержки TikTok</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен отправителя",
                        "Требует срочных действий (24 часа)",
                        "Ссылка ведет на сторонний сайт",
                        "Использует страх потери денег"
                    ],
                    feedback: {
                        correct: "Правильно! Это фишинговое сообщение, использующее страх потери денег. Официальный домен TikTok - @tiktok.com.",
                        incorrect: "Это было фишинговое сообщение. Настоящие уведомления о списаниях приходят с официальных доменов и не требуют немедленных действий через сторонние ссылки."
                    },
                    tips: [
                        "Проверяйте списания в официальном приложении банка, а не по ссылкам из писем.",
                        "Официальные домены сервисов не содержат дополнительных слов (premium, billing, support в домене).",
                        "Настоящие уведомления о списаниях содержат полные реквизиты транзакции."
                    ]
                },
                {
                    title: "Легитимное письмо от Spotify",
                    description: "Настоящее уведомление о смене пароля",
                    senderName: "Spotify",
                    senderEmail: "no-reply@spotify.com",
                    subject: "Ваш пароль был изменён",
                    body: `<p>Привет,</p>
                           <p>Пароль для твоего аккаунта Spotify был только что изменён.</p>
                           <p><strong>Дата изменения:</strong> 15 марта 2023, 11:45 GMT</p>
                           <p>Если ты изменял(а) пароль, можешь проигнорировать это сообщение.</p>
                           <p>Если ты не изменял(а) пароль, <a href="https://accounts.spotify.com/password-reset" style="color: #3498db;">сбрось пароль здесь</a> и немедленно свяжись со службой поддержки.</p>
                           <p>Чтобы улучшить безопасность твоего аккаунта, рекомендуем включить двухфакторную аутентификацию в настройках.</p>
                           <p>Спасибо,<br>Команда Spotify</p>`,
                    isPhishing: false,
                    indicators: [
                        "Официальный домен @spotify.com",
                        "Конкретные детали (дата и время)",
                        "Не требует немедленных действий",
                        "Ссылка ведет на официальный домен accounts.spotify.com"
                    ],
                    feedback: {
                        correct: "Верно! Это обычное уведомление от Spotify. Обратите внимание на официальный домен, конкретные детали и то, что ссылка ведет на официальный домен Spotify.",
                        incorrect: "Это было обычное сообщение от Spotify. Настоящие уведомления о безопасности содержат конкретные детали событий и ссылки на официальные домены."
                    },
                    tips: [
                        "Проверяйте домен ссылок - они должны принадлежать официальному сервису.",
                        "Настоящие уведомления содержат конкретные временные метки событий.",
                        "Официальные сервисы не создают искусственной срочности для обычных уведомлений."
                    ]
                },
                {
                    title: "Фишинг в Instagram",
                    description: "Сообщение о нарушении авторских прав",
                    senderName: "Instagram Copyright",
                    senderEmail: "copyright@instagram-notice.com",
                    subject: "СРОЧНО: Нарушение авторских прав в вашем аккаунте",
                    body: `<p>Уважаемый пользователь Instagram,</p>
                           <p>Мы получили жалобу о нарушении авторских прав на контент в вашем аккаунте @username.</p>
                           <p>Ваш аккаунт будет удален в течение 48 часов, если вы не подтвердите право на использование контента.</p>
                           <p>Для подтверждения перейдите по ссылке и заполните форму:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://instagram-copyright-appeal.ru/form</a>
                           </p>
                           <p>Если вы не подтвердите права в течение 48 часов, аккаунт будет permanently удален.</p>
                           <p>С уважением,<br>Отдел по авторским правам Instagram</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен (@instagram-notice.com)",
                        "Искусственная срочность (48 часов)",
                        "Требует заполнения формы по ссылке",
                        "Орфографическая ошибка (permanently)"
                    ],
                    feedback: {
                        correct: "Правильно! Это фишинговая атака. Instagram отправляет уведомления о нарушении авторских прав через внутренние уведомления в приложении, а не по email с сторонних доменов.",
                        incorrect: "Это было фишинговое сообщение. Instagram никогда не требует подтверждения авторских прав через внешние ссылки в email."
                    },
                    tips: [
                        "Социальные сети решают вопросы авторских прав через внутренние системы, а не по email.",
                        "Официальные домены Instagram - @instagram.com и @facebook.com.",
                        "Настоящие уведомления о нарушениях содержат конкретные ссылки на контент и детали жалобы."
                    ]
                },
                {
                    title: "Легитимное письмо от YouTube",
                    description: "Уведомление о новом комментарии",
                    senderName: "YouTube",
                    senderEmail: "no-reply@youtube.com",
                    subject: "Новый комментарий к вашему видео",
                    body: `<p>Привет,</p>
                           <p>Пользователь CoolGamer123 оставил новый комментарий к вашему видео "Как защитить аккаунт":</p>
                           <p style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; margin: 15px 0;">
                               "Отличное видео! Спасибо за полезные советы по безопасности."
                           </p>
                           <p><a href="https://youtube.com/watch?v=abc123&lc=xyz789" style="color: #3498db;">Ответить на комментарий</a></p>
                           <p>Вы также можете отключить такие уведомления в <a href="https://youtube.com/notifications" style="color: #3498db;">настройках уведомлений</a>.</p>
                           <p>Спасибо, что делитесь контентом на YouTube!</p>
                           <p>— Команда YouTube</p>`,
                    isPhishing: false,
                    indicators: [
                        "Официальный домен @youtube.com",
                        "Конкретный контент (цитата комментария)",
                        "Ссылки ведут на youtube.com",
                        "Нет требований срочных действий"
                    ],
                    feedback: {
                        correct: "Верно! Это обычнок уведомление от YouTube. Обратите внимание на официальный домен, конкретный контент и то, что все ссылки ведут на youtube.com.",
                        incorrect: "Это было обычное сообщение от YouTube. Настоящие уведомления от сервисов содержат конкретный контент и ссылки на официальные домены."
                    },
                    tips: [
                        "Легитимные уведомления часто содержат фрагменты контента (комментарии, сообщения).",
                        "Все ссылки в настоящих письмах ведут на официальные домены сервиса.",
                        "Официальные сервисы дают возможность отписаться от рассылок через настройки."
                    ]
                }
            ],
            adults: [
                {
                    title: "Банковский фишинг",
                    description: "Письмо от имени банка о блокировке карты",
                    senderName: "Сбербанк России",
                    senderEmail: "security@sberbank-ru.com",
                    subject: "Срочно! Ваша карта будет заблокирована",
                    body: `<p>Уважаемый клиент!</p>
                           <p>В целях безопасности ваша банковская карта будет временно заблокирована из-за подозрительной активности.</p>
                           <p>Для разблокировки карты и подтверждения операций перейдите по ссылке и авторизуйтесь в интернет-банке:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://sberbank-security.ru/login</a>
                           </p>
                           <p>Если вы не подтвердите операции в течение 2 часов, карта будет заблокирована на 72 часа.</p>
                           <p>С уважением,<br>Служба безопасности Сбербанка</p>`,
                    isPhishing: true,
                    indicators: [
                        "Поддельный домен (не sberbank.ru)",
                        "Требует перехода по ссылке для 'подтверждения'",
                        "Использует давление времени (2 часа)",
                        "Ссылка ведет на неофициальный сайт"
                    ],
                    feedback: {
                        correct: "Верно! Это классический банковский фишинг. Настоящие уведомления от банков никогда не содержат прямых ссылок для входа в интернет-банк.",
                        incorrect: "Это было фишинговое сообщение. Банки никогда не просят переходить по ссылкам в письмах для входа в интернет-банк или подтверждения данных."
                    },
                    tips: [
                        "Настоящие письма от банков приходят с официальных доменов (например, @sberbank.ru).",
                        "Никогда не переходите по ссылкам из писем для входа в интернет-банк - вводите адрес вручную.",
                        "Банки не блокируют карты по email-уведомлениям без предварительного звонка."
                    ]
                },
                {
                    title: "Уведомление от Госуслуг",
                    description: "Письмо о необходимости подтверждения данных",
                    senderName: "Портал Госуслуги",
                    senderEmail: "no-reply@gosuslugi-gov.ru",
                    subject: "Требуется подтверждение ваших персональных данных",
                    body: `<p>Уважаемый пользователь!</p>
                           <p>В связи с обновлением системы безопасности портала Госуслуги, требуется подтверждение ваших персональных данных.</p>
                           <p>Для продолжения использования услуг портала, перейдите по ссылке и подтвердите ваши данные:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://gosuslugi-verify.ru/confirm</a>
                           </p>
                           <p>Если вы не подтвердите данные в течение 7 дней, доступ к вашему аккаунту будет ограничен.</p>
                           <p>С уважением,<br>Служба поддержки портала Госуслуги</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен (правильный: gosuslugi.ru)",
                        "Требует перехода по ссылке для подтверждения данных",
                        "Угроза ограничения доступа к аккаунту",
                        "Ссылка ведет на сторонний сайт"
                    ],
                    feedback: {
                        correct: "Правильно! Это фишинговая атака под видом Госуслуг. Официальный домен портала - gosuslugi.ru, а не gosuslugi-gov.ru.",
                        incorrect: "Это было фишинговое сообщение. Госуслуги никогда не запрашивают подтверждение данных через ссылки в письмах."
                    },
                    tips: [
                        "Официальные письма от Госуслуг приходят с домена @gosuslugi.ru.",
                        "Госуслуги никогда не просят подтверждать данные через ссылки в письмах.",
                        "Все операции с персональными данными выполняются только после авторизации на официальном сайте."
                    ]
                },
                {
                    title: "Уведомление от службы доставки",
                    description: "Сообщение о проблемах с доставкой посылки",
                    senderName: "Служба доставки BoxBerry",
                    senderEmail: "notify@boxberry-delivery.com",
                    subject: "Проблема с доставкой вашей посылки",
                    body: `<p>Здравствуйте!</p>
                           <p>При доставке вашей посылки №789456123 возникли проблемы с определением адреса.</p>
                           <p>Для уточнения адреса доставки и получения посылки перейдите по ссылке:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://boxberry-update-address.ru/track/789456123</a>
                           </p>
                           <p>Если адрес не будет уточнен в течение 48 часов, посылка будет возвращена отправителю.</p>
                           <p>С уважением,<br>Служба поддержки BoxBerry</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен (правильный: boxberry.ru)",
                        "Ссылка ведет на сторонний сайт",
                        "Используется давление времени (48 часов)",
                        "Требует перехода по ссылке для уточнения адреса"
                    ],
                    feedback: {
                        correct: "Верно! Это фишинговая атака под видом службы доставки. Настоящие уведомления от служб доставки приходят с официальных доменов.",
                        incorrect: "Это было фишинговое сообщение. Службы доставки обычно звонят или отправляют SMS при проблемах с адресом, а не просят переходить по ссылкам в письмах."
                    },
                    tips: [
                        "Проверяйте трек-номер посылки на официальном сайте службы доставки, а не по ссылкам из писем.",
                        "Службы доставки редко просят уточнять адрес через ссылки в письмах.",
                        "Официальные уведомления приходят с корпоративных доменов компании."
                    ]
                },
                {
                    title: "Легитимное письмо от банка",
                    description: "Настоящее уведомление о выписке",
                    senderName: "Тинькофф Банк",
                    senderEmail: "no-reply@tinkoff.ru",
                    subject: "Ежемесячная выписка по счету",
                    body: `<p>Уважаемый клиент!</p>
                           <p>Ваша ежемесячная выписка по счету **** 5678 за март 2023 г. готова.</p>
                           <p><strong>Остаток на счете:</strong> 45 230,15 руб.</p>
                           <p><strong>Сумма операций за месяц:</strong> 12 450,00 руб.</p>
                           <p>Для просмотра детальной выписки <a href="https://www.tinkoff.ru/login" style="color: #3498db;">войдите в интернет-банк</a>.</p>
                           <p>Если у вас есть вопросы по операциям, обратитесь в службу поддержки по телефону 8-800-555-77-78.</p>
                           <p>С уважением,<br>Тинькофф Банк</p>`,
                    isPhishing: false,
                    indicators: [
                        "Официальный домен @tinkoff.ru",
                        "Конкретные цифры и детали",
                        "Ссылка ведет на официальный сайт tinkoff.ru",
                        "Указан официальный телефон поддержки"
                    ],
                    feedback: {
                        correct: "Верно! Это обычное письмо от Тинькофф Банка. Обратите внимание на официальный домен, конкретные данные и ссылку на официальный сайт.",
                        incorrect: "Это было обычное сообщение от банка. Настоящие письма от банков содержат конкретные данные и ссылки на официальные сайты."
                    },
                    tips: [
                        "Настоящие письма от банков содержат конкретные данные (номера счетов, суммы).",
                        "Официальные банковские домены обычно простые и узнаваемые.",
                        "Банки указывают официальные телефоны поддержки в письмах."
                    ]
                },
                {
                    title: "Фишинг от имени налоговой",
                    description: "Письмо о налоговом вычете",
                    senderName: "Федеральная налоговая служба",
                    senderEmail: "notification@fns-tax-refund.com",
                    subject: "Вам положен налоговый вычет 12 540 руб.",
                    body: `<p>Уважаемый налогоплательщик!</p>
                           <p>По данным нашего учета, вам положен налоговый вычет за 2022 год в размере 12 540 рублей.</p>
                           <p>Для получения вычета необходимо подтвердить ваши банковские реквизиты в течение 3 дней.</p>
                           <p>Подтвердите реквизиты по ссылке:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://fns-tax-refund.ru/confirm</a>
                           </p>
                           <p>После подтверждения реквизитов средства будут перечислены в течение 10 рабочих дней.</p>
                           <p>С уважением,<br>Федеральная налоговая служба</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен (правильный: nalog.ru)",
                        "Требует подтверждения реквизитов по ссылке",
                        "Использует давление времени (3 дня)",
                        "Ссылка ведет на сторонний сайт"
                    ],
                    feedback: {
                        correct: "Правильно! Это фишинговая атака. ФНС никогда не запрашивает банковские реквизиты через ссылки в письмах и не создает искусственных сроков.",
                        incorrect: "Это было фишинговое сообщение. ФНС работает через личный кабинет налогоплательщика на nalog.ru и не рассылает подобных писем."
                    },
                    tips: [
                        "Официальный домен ФНС - nalog.ru.",
                        "ФНС не запрашивает банковские реквизиты через email.",
                        "Все операции с налоговыми вычетами производятся через личный кабинет на официальном сайте."
                    ]
                },
                {
                    title: "Легитимное письмо от УК",
                    description: "Квитанция за коммунальные услуги",
                    senderName: "Управляющая компания 'Комфорт'",
                    senderEmail: "no-reply@uk-comfort.ru",
                    subject: "Квитанция за коммунальные услуги, март 2023",
                    body: `<p>Уважаемый жилец!</p>
                           <p>Прикрепляем квитанцию за коммунальные услуги за март 2023 г.</p>
                           <p><strong>Адрес:</strong> ул. Ленина, д. 10, кв. 25</p>
                           <p><strong>Сумма к оплате:</strong> 3 456,78 руб.</p>
                           <p><strong>Срок оплаты:</strong> до 25 апреля 2023 г.</p>
                           <p>Квитанция в формате PDF прикреплена к этому письму.</p>
                           <p>Оплатить можно через онлайн-банк по реквизитам в квитанции или в отделениях банков.</p>
                           <p>С уважением,<br>Управляющая компания "Комфорт"</p>`,
                    isPhishing: false,
                    indicators: [
                        "Официальный домен управляющей компании",
                        "Конкретные данные (адрес, сумма, срок)",
                        "Не содержит подозрительных ссылок",
                        "Предлагает стандартные способы оплаты"
                    ],
                    feedback: {
                        correct: "Верно! Это обычное письмо от управляющей компании. Обратите внимание на конкретные данные, отсутствие подозрительных ссылок и стандартные способы оплаты.",
                        incorrect: "Это было обычное сообщение от управляющей компании. Настоящие квитанции содержат конкретные данные и не требуют действий через подозрительные ссылки."
                    },
                    tips: [
                        "Легитимные письма от УК содержат конкретные данные (адрес, сумму, сроки).",
                        "Настоящие квитанции обычно приходят как вложения, а не через ссылки.",
                        "Управляющие компании дают стандартные способы оплаты без создания срочности."
                    ]
                },
                {
                    title: "Фишинг от имени ПФР",
                    description: "Письмо о перерасчете пенсии",
                    senderName: "Пенсионный фонд России",
                    senderEmail: "pfr-recalculation@pf-russia.com",
                    subject: "СРОЧНО: Перерасчет вашей пенсии",
                    body: `<p>Уважаемый получатель пенсии!</p>
                           <p>В связи с изменениями в законодательстве требуется перерасчет вашей пенсии.</p>
                           <p>Для получения дополнительных выплат за предыдущие периоды необходимо подтвердить данные.</p>
                           <p>Перейдите по ссылке и заполните форму:</p>
                           <p style="margin: 15px 0;">
                               <a href="#" style="color: #3498db; text-decoration: underline;">https://pfr-recalculation.ru/form</a>
                           </p>
                           <p>Форма должна быть заполнена в течение 5 рабочих дней для получения выплат.</p>
                           <p>С уважением,<br>Отдел перерасчета ПФР</p>`,
                    isPhishing: true,
                    indicators: [
                        "Неофициальный домен (правильный: pfr.gov.ru)",
                        "Требует заполнения формы по ссылке",
                        "Искусственная срочность (5 дней)",
                        "Ссылка ведет на сторонний сайт"
                    ],
                    feedback: {
                        correct: "Правильно! Это фишинговая атака. ПФР никогда не запрашивает данные через ссылки в письмах и не создает искусственных сроков для перерасчета.",
                        incorrect: "Это было фишинговое сообщение. ПФР работает через личный кабинет на pfr.gov.ru и не рассылает подобных писем."
                    },
                    tips: [
                        "Официальный домен ПФР - pfr.gov.ru.",
                        "ПФР не запрашивает данные через email-ссылки.",
                        "Все операции с пенсиями производятся через личный кабинет или отделения ПФР."
                    ]
                },
                {
                    title: "Легитимное письмо от онлайн-магазина",
                    description: "Подтверждение заказа",
                    senderName: "OZON",
                    senderEmail: "no-reply@ozon.ru",
                    subject: "Ваш заказ №789456123 подтверждён",
                    body: `<p>Здравствуйте!</p>
                           <p>Ваш заказ №789456123 от 15 марта 2023 подтверждён.</p>
                           <p><strong>Состав заказа:</strong></p>
                           <ul>
                               <li>Смартфон Samsung Galaxy A53 (1 шт.) - 24 990 руб.</li>
                               <li>Чехол для смартфона (1 шт.) - 890 руб.</li>
                           </ul>
                           <p><strong>Итого к оплате:</strong> 25 880 руб.</p>
                           <p><strong>Способ доставки:</strong> Курьерская доставка</p>
                           <p><strong>Адрес доставки:</strong> г. Москва, ул. Тверская, д. 10, кв. 25</p>
                           <p>Вы можете отслеживать статус заказа в <a href="https://ozon.ru/my/orders" style="color: #3498db;">личном кабинете</a>.</p>
                           <p>Спасибо за покупку!<br>Команда OZON</p>`,
                    isPhishing: false,
                    indicators: [
                        "Официальный домен @ozon.ru",
                        "Конкретные детали заказа",
                        "Ссылка ведет на официальный сайт",
                        "Нет требований дополнительных действий"
                    ],
                    feedback: {
                        correct: "Верно! Это обычное письмо от OZON. Обратите внимание на официальный домен, конкретные детали заказа и ссылку на личный кабинет на ozon.ru.",
                        incorrect: "Это было обычное сообщение от онлайн-магазина. Настоящие подтверждения заказов содержат конкретные детали и ссылки на официальные сайты."
                    },
                    tips: [
                        "Легитимные письма от магазинов содержат конкретные детали заказа (номера, состав, суммы).",
                        "Все ссылки в настоящих письмах ведут на официальные домены магазинов.",
                        "Официальные магазины не запрашивают дополнительных данных после оформления заказа."
                    ]
                }
            ]
        };

        // DOM Elements
        const homeSection = document.getElementById('homeSection');
        const trainingSection = document.getElementById('trainingSection');
        const statsSection = document.getElementById('statsSection');
        const methodSection = document.getElementById('methodSection');

        const homeBtn = document.getElementById('homeBtn');
        const trainingBtn = document.getElementById('trainingBtn');
        const statsBtn = document.getElementById('statsBtn');
        const methodBtn = document.getElementById('methodBtn');

        const startTeensModule = document.getElementById('startTeensModule');
        const startAdultsModule = document.getElementById('startAdultsModule');
        const teensModule = document.getElementById('teensModule');
        const adultsModule = document.getElementById('adultsModule');

        const backToModulesBtn = document.getElementById('backToModulesBtn');
        const backToHomeFromStats = document.getElementById('backToHomeFromStats');
        const backToHomeFromMethod = document.getElementById('backToHomeFromMethod');

        const phishingBtn = document.getElementById('phishingBtn');
        const legitimateBtn = document.getElementById('legitimateBtn');
        const submitBtn = document.getElementById('submitBtn');
        const nextBtn = document.getElementById('nextBtn');
        const resetStatsBtn = document.getElementById('resetStatsBtn');
        const showAnswersBtn = document.getElementById('showAnswersBtn');

        // Scenario elements
        const scenarioTitle = document.getElementById('scenarioTitle');
        const scenarioDescription = document.getElementById('scenarioDescription');
        const currentTask = document.getElementById('currentTask');
        const totalTasks = document.getElementById('totalTasks');
        const senderName = document.getElementById('senderName');
        const senderEmail = document.getElementById('senderEmail');
        const messageSubject = document.getElementById('messageSubject');
        const messageBody = document.getElementById('messageBody');
        const indicatorsGrid = document.getElementById('indicatorsGrid');
        const indicatorsArea = document.getElementById('indicatorsArea');
        const feedbackArea = document.getElementById('feedbackArea');
        const decisionArea = document.getElementById('decisionArea');
        const nextButtonArea = document.getElementById('nextButtonArea');

        // Stats elements
        const completedTasks = document.getElementById('completedTasks');
        const totalCompletedTasks = document.getElementById('totalCompletedTasks');
        const correctAnswers = document.getElementById('correctAnswers');
        const correctPercentage = document.getElementById('correctPercentage');
        const currentStreak = document.getElementById('currentStreak');
        const modulesCompleted = document.getElementById('modulesCompleted');

        // Navigation Functions
        function showSection(section) {
            // Hide all sections
            homeSection.style.display = 'none';
            trainingSection.style.display = 'none';
            trainingSection.classList.remove('active');
            statsSection.style.display = 'none';
            statsSection.classList.remove('active');
            methodSection.style.display = 'none';
            
            // Remove active class from all nav buttons
            homeBtn.classList.remove('active');
            trainingBtn.classList.remove('active');
            statsBtn.classList.remove('active');
            methodBtn.classList.remove('active');
            
            // Show selected section
            if (section === 'home') {
                homeSection.style.display = 'block';
                homeBtn.classList.add('active');
            } else if (section === 'training') {
                trainingSection.style.display = 'block';
                trainingSection.classList.add('active');
                trainingBtn.classList.add('active');
            } else if (section === 'stats') {
                statsSection.style.display = 'block';
                statsSection.classList.add('active');
                statsBtn.classList.add('active');
                updateStatsDisplay();
            } else if (section === 'method') {
                methodSection.style.display = 'block';
                methodBtn.classList.add('active');
            }
        }

        // Initialize app
        function initApp() {
            // Load saved state from localStorage
            loadState();
            
            // Set initial view
            showSection('home');
            
            // Setup event listeners
            setupEventListeners();
            
            // Update stats display
            updateStatsDisplay();
        }

        // Load state from localStorage
        function loadState() {
            const savedState = localStorage.getItem('antiphishing-state');
            if (savedState) {
                const parsedState = JSON.parse(savedState);
                Object.assign(state, parsedState);
            }
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('antiphishing-state', JSON.stringify(state));
        }

        // Setup event listeners
        function setupEventListeners() {
            // Navigation buttons
            homeBtn.addEventListener('click', () => showSection('home'));
            trainingBtn.addEventListener('click', () => showSection('training'));
            statsBtn.addEventListener('click', () => showSection('stats'));
            methodBtn.addEventListener('click', () => showSection('method'));
            
            // Module selection
            startTeensModule.addEventListener('click', () => startModule('teens'));
            startAdultsModule.addEventListener('click', () => startModule('adults'));
            
            // Back buttons
            backToModulesBtn.addEventListener('click', () => showSection('home'));
            backToHomeFromStats.addEventListener('click', () => showSection('home'));
            backToHomeFromMethod.addEventListener('click', () => showSection('home'));
            
            // Decision buttons
            phishingBtn.addEventListener('click', () => selectAnswer(true));
            legitimateBtn.addEventListener('click', () => selectAnswer(false));
            
            // Submit and next buttons
            submitBtn.addEventListener('click', submitAnswer);
            nextBtn.addEventListener('click', nextScenario);
            showAnswersBtn.addEventListener('click', toggleAnswersVisibility);
            
            // Reset stats
            resetStatsBtn.addEventListener('click', resetStats);
            
            // Module cards click
            teensModule.addEventListener('click', (e) => {
                if (e.target !== startTeensModule && !startTeensModule.contains(e.target)) {
                    startModule('teens');
                }
            });
            
            adultsModule.addEventListener('click', (e) => {
                if (e.target !== startAdultsModule && !startAdultsModule.contains(e.target)) {
                    startModule('adults');
                }
            });
        }

        // Start a module
        function startModule(moduleType) {
            state.currentModule = moduleType;
            state.currentScenario = 0;
            state.selectedAnswer = null;
            state.selectedIndicators = [];
            state.showAnswersAfterFeedback = false;
            
            showSection('training');
            loadScenario();
        }

        // Load current scenario
        function loadScenario() {
            if (!state.currentModule || state.currentScenario >= scenarios[state.currentModule].length) {
                // End of module
                endModule();
                return;
            }
            
            const scenario = scenarios[state.currentModule][state.currentScenario];
            
            // Update UI with scenario data
            scenarioTitle.textContent = scenario.title;
            scenarioDescription.textContent = scenario.description;
            senderName.textContent = scenario.senderName;
            senderEmail.textContent = scenario.senderEmail;
            messageSubject.textContent = scenario.subject;
            messageBody.innerHTML = scenario.body;
            
            // Update progress
            currentTask.textContent = state.currentScenario + 1;
            totalTasks.textContent = scenarios[state.currentModule].length;
            
            // Reset UI state
            resetDecisionUI();
            
            // Setup indicators
            setupIndicators(scenario.indicators);
            
            // Hide feedback and next button area
            feedbackArea.classList.remove('active');
            feedbackArea.innerHTML = '';
            nextButtonArea.style.display = 'none';
            
            // Show decision area
            decisionArea.classList.remove('collapsed');
            decisionArea.style.display = 'block';
            
            // Show submit button
            submitBtn.style.display = 'inline-flex';
            submitBtn.disabled = true;
        }

        // Setup indicators checkboxes
        function setupIndicators(indicators) {
            indicatorsGrid.innerHTML = '';
            state.selectedIndicators = [];
            
            indicators.forEach((indicator, index) => {
                const checkboxDiv = document.createElement('div');
                checkboxDiv.className = 'indicator-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `indicator-${index}`;
                checkbox.value = index;
                
                const label = document.createElement('label');
                label.htmlFor = `indicator-${index}`;
                label.textContent = indicator;
                
                checkbox.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        state.selectedIndicators.push(index);
                    } else {
                        state.selectedIndicators = state.selectedIndicators.filter(i => i !== index);
                    }
                });
                
                checkboxDiv.appendChild(checkbox);
                checkboxDiv.appendChild(label);
                indicatorsGrid.appendChild(checkboxDiv);
            });
            
            // Show indicators area only if there are indicators
            if (indicators.length > 0) {
                indicatorsArea.classList.add('visible');
            } else {
                indicatorsArea.classList.remove('visible');
            }
        }

        // Reset decision UI
        function resetDecisionUI() {
            phishingBtn.classList.remove('selected');
            legitimateBtn.classList.remove('selected');
            submitBtn.disabled = true;
            state.selectedAnswer = null;
            
            // Reset checkboxes
            const checkboxes = indicatorsGrid.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
        }

        // Select answer
        function selectAnswer(isPhishing) {
            phishingBtn.classList.remove('selected');
            legitimateBtn.classList.remove('selected');
            
            if (isPhishing) {
                phishingBtn.classList.add('selected');
                state.selectedAnswer = true;
            } else {
                legitimateBtn.classList.add('selected');
                state.selectedAnswer = false;
            }
            
            submitBtn.disabled = false;
        }

        // Submit answer
        function submitAnswer() {
            if (state.selectedAnswer === null) return;
            
            const scenario = scenarios[state.currentModule][state.currentScenario];
            const isCorrect = state.selectedAnswer === scenario.isPhishing;
            
            // Update stats
            state.scenariosCompleted++;
            if (isCorrect) {
                state.userScore++;
                state.currentStreak++;
                if (state.currentStreak > state.maxStreak) {
                    state.maxStreak = state.currentStreak;
                }
            } else {
                state.currentStreak = 0;
            }
            
            // Save user answer
            state.userAnswers.push({
                module: state.currentModule,
                scenario: state.currentScenario,
                answer: state.selectedAnswer,
                correct: isCorrect,
                selectedIndicators: [...state.selectedIndicators]
            });
            
            // Save state
            saveState();
            
            // Show feedback and hide decision area
            showFeedback(scenario, isCorrect);
            hideDecisionArea();
            
            // Update UI
            submitBtn.style.display = 'none';
            nextButtonArea.style.display = 'block';
        }

        // Hide decision area
        function hideDecisionArea() {
            decisionArea.classList.add('collapsed');
            setTimeout(() => {
                decisionArea.style.display = 'none';
            }, 300);
        }

        // Show decision area
        function showDecisionArea() {
            decisionArea.style.display = 'block';
            setTimeout(() => {
                decisionArea.classList.remove('collapsed');
            }, 10);
        }

        // Toggle answers visibility
        function toggleAnswersVisibility() {
            if (state.showAnswersAfterFeedback) {
                hideDecisionArea();
                showAnswersBtn.innerHTML = '<i class="fas fa-eye"></i> Показать варианты ответа';
                state.showAnswersAfterFeedback = false;
            } else {
                showDecisionArea();
                showAnswersBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Скрыть варианты ответа';
                state.showAnswersAfterFeedback = true;
            }
        }

        // Show feedback
        function showFeedback(scenario, isCorrect) {
            feedbackArea.innerHTML = '';
            
            const feedbackHeader = document.createElement('div');
            feedbackHeader.className = `feedback-header ${isCorrect ? 'correct' : 'incorrect'}`;
            
            const icon = document.createElement('i');
            icon.className = isCorrect ? 'fas fa-check-circle' : 'fas fa-times-circle';
            
            const feedbackDetails = document.createElement('div');
            feedbackDetails.className = 'feedback-details';
            
            const title = document.createElement('h4');
            title.textContent = isCorrect ? 'Правильно!' : 'Неправильно';
            
            const message = document.createElement('p');
            message.textContent = isCorrect ? scenario.feedback.correct : scenario.feedback.incorrect;
            
            feedbackDetails.appendChild(title);
            feedbackDetails.appendChild(message);
            feedbackHeader.appendChild(icon);
            feedbackHeader.appendChild(feedbackDetails);
            
            const feedbackPoints = document.createElement('div');
            feedbackPoints.className = 'feedback-points';
            
            // Add phishing clues
            scenario.indicators.forEach((indicator, index) => {
                const point = document.createElement('div');
                point.className = 'feedback-point phishing-clue';
                
                const iconSpan = document.createElement('span');
                iconSpan.textContent = '✓ ';
                iconSpan.style.marginRight = '8px';
                
                const textSpan = document.createElement('span');
                textSpan.textContent = indicator;
                
                point.appendChild(iconSpan);
                point.appendChild(textSpan);
                feedbackPoints.appendChild(point);
            });
            
            // Add security tips
            scenario.tips.forEach(tip => {
                const point = document.createElement('div');
                point.className = 'feedback-point security-tip';
                
                const iconSpan = document.createElement('span');
                iconSpan.textContent = '💡 ';
                iconSpan.style.marginRight = '8px';
                
                const textSpan = document.createElement('span');
                textSpan.textContent = tip;
                
                point.appendChild(iconSpan);
                point.appendChild(textSpan);
                feedbackPoints.appendChild(point);
            });
            
            feedbackArea.appendChild(feedbackHeader);
            feedbackArea.appendChild(feedbackPoints);
            feedbackArea.classList.add('active');
        }

        // Next scenario
        function nextScenario() {
            state.currentScenario++;
            state.selectedAnswer = null;
            state.selectedIndicators = [];
            state.showAnswersAfterFeedback = false;
            
            if (state.currentScenario < scenarios[state.currentModule].length) {
                loadScenario();
            } else {
                endModule();
            }
        }

        // End of module
        function endModule() {
            // Check if module completed
            const moduleAnswers = state.userAnswers.filter(
                answer => answer.module === state.currentModule
            );
            const moduleCompleted = moduleAnswers.length === scenarios[state.currentModule].length;
            
            if (moduleCompleted && !state.modulesCompleted.includes(state.currentModule)) {
                state.modulesCompleted++;
                saveState();
            }
            
            // Show completion message
            feedbackArea.innerHTML = '';
            
            const completionDiv = document.createElement('div');
            completionDiv.className = 'feedback-header correct';
            
            const icon = document.createElement('i');
            icon.className = 'fas fa-trophy';
            
            const feedbackDetails = document.createElement('div');
            feedbackDetails.className = 'feedback-details';
            
            const title = document.createElement('h4');
            title.textContent = 'Модуль завершён!';
            
            const message = document.createElement('p');
            const correctInModule = moduleAnswers.filter(answer => answer.correct).length;
            const totalInModule = scenarios[state.currentModule].length;
            const percentage = Math.round((correctInModule / totalInModule) * 100);
            message.textContent = `Вы правильно определили ${correctInModule} из ${totalInModule} сообщений (${percentage}% точность).`;
            
            feedbackDetails.appendChild(title);
            feedbackDetails.appendChild(message);
            completionDiv.appendChild(icon);
            completionDiv.appendChild(feedbackDetails);
            
            const backButton = document.createElement('div');
            backButton.className = 'text-center mt-30';
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.innerHTML = '<i class="fas fa-home"></i> Вернуться на главную';
            btn.addEventListener('click', () => showSection('home'));
            backButton.appendChild(btn);
            
            feedbackArea.appendChild(completionDiv);
            feedbackArea.appendChild(backButton);
            feedbackArea.classList.add('active');
            
            // Hide decision area and next button area
            decisionArea.style.display = 'none';
            nextButtonArea.style.display = 'none';
        }

        // Update stats display
        function updateStatsDisplay() {
            completedTasks.textContent = state.scenariosCompleted;
            totalCompletedTasks.textContent = scenarios.teens.length + scenarios.adults.length;
            correctAnswers.textContent = state.userScore;
            
            const percentage = state.scenariosCompleted > 0 
                ? Math.round((state.userScore / state.scenariosCompleted) * 100) 
                : 0;
            correctPercentage.textContent = percentage;
            
            currentStreak.textContent = state.currentStreak;
            modulesCompleted.textContent = state.modulesCompleted;
        }

        // Reset statistics
        function resetStats() {
            if (confirm('Вы уверены, что хотите сбросить всю статистику?')) {
                state.userScore = 0;
                state.scenariosCompleted = 0;
                state.currentStreak = 0;
                state.maxStreak = 0;
                state.userAnswers = [];
                state.modulesCompleted = 0;
                
                saveState();
                updateStatsDisplay();
                alert('Статистика сброшена!');
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>